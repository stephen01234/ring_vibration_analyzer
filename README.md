

1. 影像預處理階段
#灰度轉換與增強

首先將彩色影片幀轉換為灰度圖像，簡化後續處理並降低計算複雜度
應用自適應直方圖均衡化(CLAHE)技術增強對比度，使圓環邊緣更加明顯
該方法特別適合處理照明不均或對比度較低的影像，通過分區域處理增強局部細節

#雜訊抑制

套用高斯模糊濾波器，有效降低影像中的高頻雜訊，同時保留主要結構
針對不同類型的圓環，程式會動態調整濾波器參數，細環使用較小內核(3×3)，粗環使用較大內核(5×5)
這種差異化處理確保了既能有效去除雜訊，又能保留細微邊緣的細節

2. 多級二值化處理
二值化策略融合

同時採用多種二值化方法，針對不同光照條件和圓環特性提供互補優勢：

自適應閾值法：根據像素周圍區域的平均值動態調整閾值，適應局部亮度變化
Canny邊緣檢測：雙閾值檢測，專注於捕獲圓環的邊緣細節
Otsu自適應閾值：全局閾值方法，自動計算最佳分割閾值

#形態學優化

針對二值化後的圖像實施形態學操作，改善圓環輪廓品質：

應用閉操作(closing)連接斷裂的邊緣線段，修復圓環邊緣不連續處
對於細環，使用橢圓形結構元素進行處理，強化環形特徵
針對圓環的不同方向使用定向結構元素，確保邊緣特徵在所有方向上均勻連接

3. 輪廓檢測與篩選
#輪廓提取技術

使用cv2.findContours()函數在二值化圖像上檢測所有可能的輪廓
通過RETR_LIST模式獲取所有輪廓，確保不遺漏任何潛在的圓環結構
對於多層漸層圓環，程式能同時識別多個同心輪廓，便於後續分析

#輪廓篩選機制

實施多層次篩選策略，根據多種幾何特徵識別有效的圓環輪廓：

面積篩選：剔除過小的輪廓，減少雜訊干擾
圓形度評估：使用4π×面積/周長²公式計算圓形度，理想圓的值為1
中心點聚類：分析候選輪廓的中心點分布，識別屬於同一圓環的多個輪廓

#輪廓擬合與優化

對通過初步篩選的輪廓進行精細處理和參數提取：

使用橢圓擬合(cv2.fitEllipse)獲取圓環的方向角度和軸長
對於細環，應用輪廓平滑處理，減少邊緣不規則性
進行異常點去除，排除離群點對輪廓形狀的影響

4. 特徵點提取與追蹤
#中心點定位

使用矩法(moments)精確計算圓環中心，結合多個輪廓的信息提高穩定性
對於多層輪廓，通過加權平均獲得更精確的圓環中心位置
在追蹤過程中使用卡爾曼濾波器平滑中心點軌跡，減少隨機跳動
#最低點追蹤

識別輪廓中Y坐標最大的點作為重力方向的最低點
追蹤最低點的移動軌跡，分析圓環在重力方向的振動行為
結合最低點和中心點的相對位置，可分析圓環的搖擺行為

5. 徑向變形分析
#徑向採樣點計算

從圓心向外發射射線，與輪廓計算交點，獲得徑向採樣點
均勻分布在360度範圍內，通常使用24-36個點進行採樣
這些採樣點代表了圓環在各個方向上的半徑大小

#徑向變形追蹤

記錄每個徑向點在時間序列上的距離變化
使用第一幀或平均值作為參考基準，計算各方向的徑向變形量
通過徑向變形分析，能夠識別圓環的變形模式和不同方向的振動特性











